<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Synth</title>
    <script src="qwerty-hancock.js"></script>
    <script src="Tone.min.js"></script>
</head>
<body>
<div>
<div id="keyboard"></div>
</div>
<script>
  var context = new AudioContext();

  var keyboard = new QwertyHancock({
      id: 'keyboard',
      startNote: 'A3',
      octaves: 3,
      width: 600,
      height: 150,
  });

  var piano = new Tone.Sampler({
      "C4":"lads.m4a"
  });

  piano.toMaster();

  keyboard.keyDown = function(n,f) {};

  Tone.Buffer.onload = function() {
	  keyboard.keyDown = function (note, freq) {
	      context.resume().then(function(){
		var pitch = 69 + 12*Math.log(freq/440)/Math.log(2)
		piano.triggerAttack("C4");
		piano.pitch = pitch-60; // C4 is 60
	      })
	  }
  }

  keyboard.keyUp = function (node, frequency) {
  }

</script> 
</body></html>
